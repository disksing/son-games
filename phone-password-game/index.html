<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>æ‰‹æœºå¯†ç æ¸¸æˆ</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
        }

        #phone {
            width: 300px;
            height: 650px;
            background: #000;
            border-radius: 30px;
            margin: 20px auto;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 8px solid #333;
            display: flex;
            flex-direction: column;
        }

        .screen {
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #1a1a1a 0%, #2d2d2d 100%);
            border-radius: 22px;
            position: relative;
            overflow: hidden;
        }

        .status-bar {
            height: 30px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 12px;
        }

        .content {
            height: calc(100% - 60px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px 10px 20px;
            text-align: center;
        }

        .lock-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 30px;
        }

        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            width: 220px;
            margin-top: auto;
            padding-bottom: 30px;
        }

        .key {
            width: 55px;
            height: 55px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .key:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .key:active {
            transform: scale(0.95);
        }

        .key.delete {
            background: rgba(255, 68, 68, 0.3);
        }

        .key.enter {
            background: rgba(68, 255, 68, 0.3);
        }

        .setup-screen {
            display: none;
        }

        .setup-screen.active {
            display: block;
        }

        .lock-screen {
            display: none;
        }

        .lock-screen.active {
            display: block;
        }

        .wait-screen {
            display: none;
        }

        .wait-screen.active {
            display: block;
        }

        .success-screen {
            display: none;
        }

        .success-screen.active {
            display: block;
        }

        .wait-message {
            font-size: 18px;
            margin: 20px 0;
            opacity: 0.8;
            font-weight: bold;
        }

        .setup-instructions {
            font-size: 14px;
            margin: 20px 0;
            opacity: 0.8;
            line-height: 1.5;
        }

        .password-display {
            font-size: 18px;
            font-family: monospace;
            letter-spacing: 2px;
            margin: 20px 0;
            min-height: 30px;
        }

        .error-message {
            color: #ff4444;
            font-size: 14px;
            margin: 10px 0;
            animation: fadeIn 0.3s ease;
        }

        .success-message {
            color: #44ff44;
            font-size: 18px;
            margin: 20px 0;
            animation: fadeIn 0.3s ease;
        }

        /* Peek overlay */
        .peek {
            position: absolute;
            left: 50%;
            top: 44px;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 8px 12px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 14px;
            display: none;
            z-index: 10;
            white-space: pre;
            backdrop-filter: blur(4px);
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <div id="phone">
        <div class="screen">
            <div class="status-bar">
                <span>9:41</span>
                <span>ğŸ“¶ ğŸ“¶ ğŸ“¶ ğŸ”‹ 100%</span>
            </div>

            <!-- è®¾ç½®å¯†ç ç•Œé¢ -->
            <div class="setup-screen active" id="setupScreen">
                <div class="content">
                    <div>
                        <div class="title">ğŸ”’ è®¾ç½®å¯†ç </div>
                        <div class="setup-instructions">
                            å¯†ç å¯ç•™ç©ºæˆ–ä»»æ„é•¿åº¦ï¼ˆæœ€å¤š12ä½ï¼‰<br>
                            è®°ä½è¿™ä¸ªå¯†ç ï¼Œç¨åéœ€è¦è¾“å…¥
                        </div>
                        <div class="password-display" id="setupPasswordDisplay">ï¼ˆå¯ç•™ç©ºï¼‰</div>
                        <div class="error-message" id="setupError" style="display: none;"></div>
                    </div>
                    <div class="keypad">
                        <button class="key" data-key="1">1</button>
                        <button class="key" data-key="2">2</button>
                        <button class="key" data-key="3">3</button>
                        <button class="key" data-key="4">4</button>
                        <button class="key" data-key="5">5</button>
                        <button class="key" data-key="6">6</button>
                        <button class="key" data-key="7">7</button>
                        <button class="key" data-key="8">8</button>
                        <button class="key" data-key="9">9</button>
                        <button class="key delete" data-key="delete">âŒ«</button>
                        <button class="key" data-key="0">0</button>
                        <button class="key enter" data-key="enter">âœ“</button>
                    </div>
                </div>
            </div>

            <!-- é”å®šç•Œé¢ -->
            <div class="lock-screen" id="lockScreen">
                <div class="content">
                    <div>
                        <div class="lock-icon">ğŸ”’</div>
                        <div class="title">æ‰‹æœºå·²é”å®š</div>
                        <div class="subtitle">è¯·è¾“å…¥å¯†ç è§£é”</div>
                        <div class="password-display" id="lockPasswordDisplay">ï¼ˆå¯ç•™ç©ºï¼‰</div>
                        <div class="error-message" id="lockError" style="display: none;"></div>
                    </div>
                    <div class="keypad">
                        <button class="key" data-key="1">1</button>
                        <button class="key" data-key="2">2</button>
                        <button class="key" data-key="3">3</button>
                        <button class="key" data-key="4">4</button>
                        <button class="key" data-key="5">5</button>
                        <button class="key" data-key="6">6</button>
                        <button class="key" data-key="7">7</button>
                        <button class="key" data-key="8">8</button>
                        <button class="key" data-key="9">9</button>
                        <button class="key delete" data-key="delete">âŒ«</button>
                        <button class="key" data-key="0">0</button>
                        <button class="key enter" data-key="enter">âœ“</button>
                    </div>
                </div>
            </div>

            <!-- ç­‰å¾…ç•Œé¢ -->
            <div class="wait-screen" id="waitScreen">
                <div class="content">
                    <div class="lock-icon">â°</div>
                    <div class="title">å¯†ç é”™è¯¯</div>
                    <div class="wait-message">è¯·ç­‰å¾…ä¸€å°æ—¶åé‡è¯•</div>
                    <div class="subtitle">æ‰‹æœºå·²é”å®šï¼Œè¯·ç¨åå†è¯•</div>
                </div>
            </div>

            <!-- æˆåŠŸç•Œé¢ -->
            <div class="success-screen" id="successScreen">
                <div class="content">
                    <div class="lock-icon">âœ…</div>
                    <div class="title">è§£é”æˆåŠŸï¼</div>
                    <div class="success-message">æ¬¢è¿å›æ¥</div>
                    <div class="subtitle">æ‰‹æœºå·²è§£é”</div>
                    <button class="key enter" onclick="resetGame()" style="margin-top: 20px;">é‡æ–°å¼€å§‹</button>
                </div>
            </div>

            <div id="peek" class="peek"></div>
        </div>
    </div>

    <script>
        class PhonePasswordGame {
            constructor() {
                this.correctPassword = '';
                this.currentInput = '';
                this.attempts = 0;
                this.maxAttempts = 3;
                this.waitTime = 30 * 1000; // 30ç§’ï¼ˆå®é™…æ—¶é—´ï¼‰
                this.isWaiting = false;

                this.initializeGame();
            }

            initializeGame() {
                this.showScreen('setupScreen');
                this.bindEvents();
                this.updatePasswordDisplay();
            }

            bindEvents() {
                document.querySelectorAll('.key').forEach(key => {
                    key.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const keyValue = key.getAttribute('data-key');
                        this.handleKeyPress(keyValue);
                    });
                });

                // ä¸­é”®é¢„è§ˆå¯†ç 
                const screen = document.querySelector('#phone .screen');
                screen.addEventListener('auxclick', (e) => {
                    if (e.button === 1) {
                        e.preventDefault();
                        this.showPeek();
                    }
                });
                // å…¼å®¹æŸäº›æµè§ˆå™¨ä¸­é”®mousedown
                screen.addEventListener('mousedown', (e) => {
                    if (e.button === 1) {
                        e.preventDefault();
                        this.showPeek();
                    }
                });
            }

            handleKeyPress(key) {
                if (this.isWaiting) return;

                const currentScreen = this.getCurrentScreen();

                if (key === 'delete') {
                    this.currentInput = this.currentInput.slice(0, -1);
                } else if (key === 'enter') {
                    if (currentScreen === 'setupScreen') {
                        this.confirmPassword();
                    } else if (currentScreen === 'lockScreen') {
                        this.checkPassword();
                    }
                } else if (key >= '0' && key <= '9') {
                    if (this.currentInput.length < 12) {
                        this.currentInput += key;
                    }
                }

                this.updatePasswordDisplay();
            }

            updatePasswordDisplay() {
                const currentScreen = this.getCurrentScreen();

                if (currentScreen === 'setupScreen') {
                    const display = document.getElementById('setupPasswordDisplay');
                    if (this.currentInput.length === 0) {
                        display.textContent = 'ï¼ˆå¯ç•™ç©ºï¼‰';
                    } else {
                        display.textContent = 'â€¢'.repeat(this.currentInput.length);
                    }
                } else if (currentScreen === 'lockScreen') {
                    const display = document.getElementById('lockPasswordDisplay');
                    if (this.currentInput.length === 0) {
                        display.textContent = 'ï¼ˆå¯ç•™ç©ºï¼‰';
                    } else {
                        display.textContent = 'â€¢'.repeat(this.currentInput.length);
                    }
                }
            }

            confirmPassword() {
                this.correctPassword = this.currentInput;
                this.currentInput = '';
                this.showScreen('lockScreen');
                this.hideError('setupError');
                this.lockPhone();
            }

            lockPhone() {
                this.currentInput = '';
                this.attempts = 0;
                this.updatePasswordDisplay();
                this.hideError('lockError');
            }

            checkPassword() {
                if (this.currentInput === this.correctPassword) {
                    this.showScreen('successScreen');
                } else {
                    this.attempts++;
                    this.showPasswordError();

                    if (this.attempts >= this.maxAttempts) {
                        this.startWaitPeriod();
                    } else {
                        this.currentInput = '';
                        this.updatePasswordDisplay();
                        this.showError('lockError', `å¯†ç é”™è¯¯ï¼Œè¿˜æœ‰ ${this.maxAttempts - this.attempts} æ¬¡æœºä¼š`);
                    }
                }
            }

            showPasswordError() {
                const display = document.getElementById('lockPasswordDisplay');
                display.style.color = '#ff4444';
                display.style.animation = 'shake 0.5s ease-in-out';

                setTimeout(() => {
                    display.style.color = '#fff';
                    display.style.animation = 'none';
                }, 500);
            }

            showPeek() {
                const peek = document.getElementById('peek');
                const screen = this.getCurrentScreen();
                const setupText = this.currentInput.length ? this.currentInput : 'ï¼ˆç©ºï¼‰';
                const lockText = (this.getCurrentScreen() === 'lockScreen') ? (this.currentInput.length ? this.currentInput : 'ï¼ˆç©ºï¼‰') : '';
                const expected = this.correctPassword.length ? this.correctPassword : 'ï¼ˆç©ºï¼‰';

                let text = '';
                if (screen === 'setupScreen') {
                    text = `æ­£åœ¨è®¾ç½®çš„å¯†ç :\n${setupText}`;
                } else if (screen === 'lockScreen') {
                    text = `å·²è®¾å¯†ç ï¼š${expected}\nå½“å‰è¾“å…¥ï¼š${lockText}`;
                } else if (screen === 'successScreen') {
                    text = `å·²è§£é”\nå¯†ç ï¼š${expected}`;
                } else if (screen === 'waitScreen') {
                    text = `å·²è®¾å¯†ç ï¼š${expected}`;
                }

                peek.textContent = text;
                peek.style.display = 'block';
                clearTimeout(this._peekTimer);
                this._peekTimer = setTimeout(() => { peek.style.display = 'none'; }, 2000);
            }

            startWaitPeriod() {
                this.isWaiting = true;
                this.showScreen('waitScreen');
                setTimeout(() => {
                    this.isWaiting = false;
                    this.attempts = 0;
                    this.currentInput = '';
                    this.showScreen('lockScreen');
                    this.hideError('lockError');
                }, this.waitTime);
            }

            showScreen(screenId) {
                document.querySelectorAll('.setup-screen, .lock-screen, .wait-screen, .success-screen')
                    .forEach(screen => screen.classList.remove('active'));
                document.getElementById(screenId).classList.add('active');
            }

            getCurrentScreen() {
                const activeScreen = document.querySelector('.setup-screen.active, .lock-screen.active, .wait-screen.active, .success-screen.active');
                return activeScreen ? activeScreen.id : '';
            }

            showError(elementId, message) {
                const errorElement = document.getElementById(elementId);
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }

            hideError(elementId) {
                const errorElement = document.getElementById(elementId);
                errorElement.style.display = 'none';
            }
        }

        function resetGame() {
            game = new PhonePasswordGame();
        }

        // å¯åŠ¨æ¸¸æˆ
        let game = new PhonePasswordGame();
    </script>
</body>

</html>